sap.ui.define(["sap/ui/core/mvc/ControllerExtension","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","sap/ui/core/Messaging","sap/ui/core/message/Message","sap/m/MessageToast","sap/ui/core/library","sap/m/MessagePopover","sap/m/MessageItem"],function(e,s,t,o,a,r,i,n,u){"use strict";return e.extend("hackathon.valuesphere.forecast.distribution.ext.controller.ListReportExtension",{override:{onInit:function(){this.oView=this.getView();this.oResourceBundle=this.base.getResourceBundle();this.oMessageModel=o.getMessageModel();this.oView.setModel(this.oMessageModel,"message")}},onApprove:function(){this._updateItemsStatus("APPROVED")},onReject:function(){this._updateItemsStatus("REJECTED")},onMassUpload:function(){this._updateItemsStatus("NEW")},_updateItemsStatus:function(e){const s="hackathon.valuesphere.forecast.distribution::ForecastDistributionPercentageConfigsList--fe::table::ForecastDistributionPercentageConfigs::LineItem-innerTable";const t=sap.ui.getCore().byId(s);if(!t){sap.m.MessageToast.show("Table not found");return}const o=t.getSelectedContexts();if(!o||o.length===0){sap.m.MessageToast.show("No items selected");return}sap.ui.core.BusyIndicator.show(0);const a=this.getView().getModel();const r="statusUpdateBatch";try{if(typeof a.setDeferredGroups==="function"){a.setDeferredGroups([r])}}catch(e){console.log("Deferred groups not supported, using standard updates")}const i=[];o.forEach(s=>{try{const t=s.setProperty("status",e,r);i.push(t)}catch(t){const o=s.setProperty("status",e);i.push(o)}});let n;if(typeof a.submitBatch==="function"){n=a.submitBatch(r)}else{n=Promise.all(i)}n.then(()=>{sap.ui.core.BusyIndicator.hide();sap.m.MessageToast.show(`${o.length} items successfully ${e.toLowerCase()}`)}).catch(e=>{sap.ui.core.BusyIndicator.hide();sap.m.MessageBox.error(`Error updating items: ${e.message||"Unknown error"}`);console.error("Error updating items:",e)})}})});
//# sourceMappingURL=ListReportExtension.controller.js.map